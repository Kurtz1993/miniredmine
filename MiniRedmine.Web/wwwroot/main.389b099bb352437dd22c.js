(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{338:function(e,t,a){var n={"./af":94,"./af.js":94,"./ar":95,"./ar-dz":96,"./ar-dz.js":96,"./ar-kw":97,"./ar-kw.js":97,"./ar-ly":98,"./ar-ly.js":98,"./ar-ma":99,"./ar-ma.js":99,"./ar-sa":100,"./ar-sa.js":100,"./ar-tn":101,"./ar-tn.js":101,"./ar.js":95,"./az":102,"./az.js":102,"./be":103,"./be.js":103,"./bg":104,"./bg.js":104,"./bm":105,"./bm.js":105,"./bn":106,"./bn.js":106,"./bo":107,"./bo.js":107,"./br":108,"./br.js":108,"./bs":109,"./bs.js":109,"./ca":110,"./ca.js":110,"./cs":111,"./cs.js":111,"./cv":112,"./cv.js":112,"./cy":113,"./cy.js":113,"./da":114,"./da.js":114,"./de":115,"./de-at":116,"./de-at.js":116,"./de-ch":117,"./de-ch.js":117,"./de.js":115,"./dv":118,"./dv.js":118,"./el":119,"./el.js":119,"./en-SG":120,"./en-SG.js":120,"./en-au":121,"./en-au.js":121,"./en-ca":122,"./en-ca.js":122,"./en-gb":123,"./en-gb.js":123,"./en-ie":124,"./en-ie.js":124,"./en-il":125,"./en-il.js":125,"./en-nz":126,"./en-nz.js":126,"./eo":127,"./eo.js":127,"./es":128,"./es-do":129,"./es-do.js":129,"./es-us":130,"./es-us.js":130,"./es.js":128,"./et":131,"./et.js":131,"./eu":132,"./eu.js":132,"./fa":133,"./fa.js":133,"./fi":134,"./fi.js":134,"./fo":135,"./fo.js":135,"./fr":136,"./fr-ca":137,"./fr-ca.js":137,"./fr-ch":138,"./fr-ch.js":138,"./fr.js":136,"./fy":139,"./fy.js":139,"./ga":140,"./ga.js":140,"./gd":141,"./gd.js":141,"./gl":142,"./gl.js":142,"./gom-latn":143,"./gom-latn.js":143,"./gu":144,"./gu.js":144,"./he":145,"./he.js":145,"./hi":146,"./hi.js":146,"./hr":147,"./hr.js":147,"./hu":148,"./hu.js":148,"./hy-am":149,"./hy-am.js":149,"./id":150,"./id.js":150,"./is":151,"./is.js":151,"./it":152,"./it-ch":153,"./it-ch.js":153,"./it.js":152,"./ja":154,"./ja.js":154,"./jv":155,"./jv.js":155,"./ka":156,"./ka.js":156,"./kk":157,"./kk.js":157,"./km":158,"./km.js":158,"./kn":159,"./kn.js":159,"./ko":160,"./ko.js":160,"./ku":161,"./ku.js":161,"./ky":162,"./ky.js":162,"./lb":163,"./lb.js":163,"./lo":164,"./lo.js":164,"./lt":165,"./lt.js":165,"./lv":166,"./lv.js":166,"./me":167,"./me.js":167,"./mi":168,"./mi.js":168,"./mk":169,"./mk.js":169,"./ml":170,"./ml.js":170,"./mn":171,"./mn.js":171,"./mr":172,"./mr.js":172,"./ms":173,"./ms-my":174,"./ms-my.js":174,"./ms.js":173,"./mt":175,"./mt.js":175,"./my":176,"./my.js":176,"./nb":177,"./nb.js":177,"./ne":178,"./ne.js":178,"./nl":179,"./nl-be":180,"./nl-be.js":180,"./nl.js":179,"./nn":181,"./nn.js":181,"./pa-in":182,"./pa-in.js":182,"./pl":183,"./pl.js":183,"./pt":184,"./pt-br":185,"./pt-br.js":185,"./pt.js":184,"./ro":186,"./ro.js":186,"./ru":187,"./ru.js":187,"./sd":188,"./sd.js":188,"./se":189,"./se.js":189,"./si":190,"./si.js":190,"./sk":191,"./sk.js":191,"./sl":192,"./sl.js":192,"./sq":193,"./sq.js":193,"./sr":194,"./sr-cyrl":195,"./sr-cyrl.js":195,"./sr.js":194,"./ss":196,"./ss.js":196,"./sv":197,"./sv.js":197,"./sw":198,"./sw.js":198,"./ta":199,"./ta.js":199,"./te":200,"./te.js":200,"./tet":201,"./tet.js":201,"./tg":202,"./tg.js":202,"./th":203,"./th.js":203,"./tl-ph":204,"./tl-ph.js":204,"./tlh":205,"./tlh.js":205,"./tr":206,"./tr.js":206,"./tzl":207,"./tzl.js":207,"./tzm":208,"./tzm-latn":209,"./tzm-latn.js":209,"./tzm.js":208,"./ug-cn":210,"./ug-cn.js":210,"./uk":211,"./uk.js":211,"./ur":212,"./ur.js":212,"./uz":213,"./uz-latn":214,"./uz-latn.js":214,"./uz.js":213,"./vi":215,"./vi.js":215,"./x-pseudo":216,"./x-pseudo.js":216,"./yo":217,"./yo.js":217,"./zh-cn":218,"./zh-cn.js":218,"./zh-hk":219,"./zh-hk.js":219,"./zh-tw":220,"./zh-tw.js":220};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=338},339:function(e,t,a){},375:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(50),l=a.n(s),i=a(31),c=a(26),m=a(14),o=a.n(m),u=a(51),d=a.n(u),h=a(52),f=a.n(h),p=a(1),E=a.n(p),j=a(7),v=a(22),y=a(23),g=a(231),b=(a(339),function(e){var t=new E.a,a=t.month(),n=TokenService.getUserInfo(),s=useState([]),l=o()(s,2),i=l[0],c=l[1];useEffect((function(){var e=E()(),t=e.year(),a=e.month(),r="",s="";e.date()>=16?(r=E()().year(t).month(a).date(16).format("YYYY-MM-DD"),s=E()().year(t).month(a).date(1).add(1,"months").subtract(1,"days").format("YYYY-MM-DD")):(r=E()().year(t).month(a).date(1).format("YYYY-MM-DD"),s=E()().year(t).month(a).date(15).format("YYYY-MM-DD")),axios.get("api/redmine/timeentries?userApiKey=".concat(TokenService.getApiKey(),"&userId=").concat(n.id,"&from=").concat(r,"&to=").concat(s)).then((function(e){return c(e.data)}))}),[]),t.startOf("month").startOf("week");for(var m,u=0,h=[];u<6;){var p=[];for(m=0;m<7;m++){var b=t.format("YYYY-MM-DD"),k=r.a.createElement("td",{key:m,className:a!==t.month()?"calendar-prior-months-date":""},t.format("D"));if(""!==e.from&&""!==e.to&&e.from<=b&&b<=e.to){k=r.a.createElement("td",{key:m,className:a!==t.month()?"calendar-prior-months-date":""},t.format("D"));var I=d()(i,{spent_on:b}),A=f()(I,"hours");I.length&&(k=r.a.createElement("td",{key:m,className:a!==t.month()?"calendar-prior-months-date":""},t.format("D"),r.a.createElement("p",null,"Tasks:",I.length," Hours:",A)))}p.push(k),t.add(1,"day")}var Y=r.a.createElement("tr",{key:u,className:"calendar-month-row"},p);u++,h.push(Y)}return r.a.createElement(v.a,null,r.a.createElement(y.a,null,r.a.createElement(j.a,null,r.a.createElement(g.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",{className:"calendar-month-header-row"},r.a.createElement("th",null,"Domingo"),r.a.createElement("th",null,"Lunes"),r.a.createElement("th",null,"Martes"),r.a.createElement("th",null,"Miercoles"),r.a.createElement("th",null,"Jueves"),r.a.createElement("th",null,"Viernes"),r.a.createElement("th",null,"Sabado"))),r.a.createElement("tbody",null,h)))))}),k=a(233),I=a(232),A=a.n(I),Y={isAuthenticated:!1,_userInfo:{},_timeEntryActivities:[],_dateArray:[],signIn:function(e,t,a){this._userInfo=t,this._timeEntryActivities=a,localStorage.setItem("RedmineApiToken",e),this.isAuthenticated=!0},signout:function(){this.isAuthenticated=!1,this._userInfo={},this._timeEntryActivities=[]},getApiKey:function(){return localStorage.getItem("RedmineApiToken")||""},getUserInfo:function(){return this.isAuthenticated?this._userInfo:{}},getTimeEntryActivities:function(){return this.isAuthenticated?this._timeEntryActivities:[]},getTimeEntryActivityById:function(e){var t=new Number(e);return this.isAuthenticated?A()(this._timeEntryActivities,{id:t}):{name:""}},getUserTemplates:function(){return JSON.parse(localStorage.getItem("MiniRedmineTemplates")||"[]")},getDateArray:function(e,t){if(this._dateArray.length&&this._dateArray[0].format("YYYY-MM-DD")===e)return this._dateArray;this._dateArray=[];var a=E()(e,"YYYY-MM-DD"),n=E()(t,"YYYY-MM-DD");do{this._dateArray.push(a.clone()),a.add(1,"days")}while(!1===a.isAfter(n));return this._dateArray}};var C=function(){var e=Y.getUserInfo();return r.a.createElement(k.a,null,r.a.createElement("h1",null,"Welcome!"),r.a.createElement("p",null,e.firstName,"Â ",e.lastName))},D=a(71),S=a.n(D),w=a(234),M=a.n(w),T=a(34),O=a.n(T),N=a(15),x=a(6),z=a(74);var _=function(){var e=Object(n.useState)(Y.getApiKey()),t=o()(e,2),a=t[0],s=t[1],l=Object(c.g)(),i=(Object(c.h)().state||{from:{pathname:"/"}}).from,m=function(){return l.replace(i)};function u(){return(u=M()(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===a){e.next=10;break}return e.next=4,O.a.get("api/redmine/userinfo?userApiKey=".concat(a));case 4:return n=e.sent,e.next=7,O.a.get("api/redmine/timeentryactivities?userApiKey=".concat(a));case 7:r=e.sent,Y.signIn(a,n.data,r.data),m();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(v.a,{fluid:"true"},r.a.createElement(x.a,{onSubmit:function(e){return u.apply(this,arguments)}},r.a.createElement(x.a.Row,null,r.a.createElement(x.a.Group,{as:j.a},r.a.createElement(z.a,null,r.a.createElement(x.a.Control,{type:"text",placeholder:"Redmine Api Token",value:a,onChange:function(e){return s(e.target.value)}}),r.a.createElement(z.a.Append,null,r.a.createElement(N.a,{variant:"primary",type:"submit"},"Login")))))))},R=a(237),H=a.n(R),L=a(238),K=a.n(L);var U=function(e){var t=e.children,a=K()(e,["children"]);return r.a.createElement(c.b,H()({},a,{render:function(e){var a=e.location;return Y.isAuthenticated?t:r.a.createElement(c.a,{to:{pathname:"/login",state:{from:a}}})}}))},F=a(76),G=a(28),J=a(18),B=a.n(J),P=a(53),q=a.n(P),V=a(239),W=a(21);var Q=function(e){var t=e.entry,a=e.removeTask,n=e.handleChange,s=Y.getTimeEntryActivities().map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}));return r.a.createElement(W.a,null,r.a.createElement(x.a,null,r.a.createElement(x.a.Row,null,r.a.createElement(x.a.Group,{as:j.a},r.a.createElement(x.a.Control,{type:"text",name:"IssueId",value:t.IssueId,onChange:n})),r.a.createElement(x.a.Group,{as:j.a},r.a.createElement(x.a.Control,{type:"text",name:"Comments",maxLength:"254",value:t.Comments,onChange:n}))),r.a.createElement(x.a.Row,null,r.a.createElement(x.a.Group,{as:j.a},r.a.createElement(x.a.Control,{type:"number",name:"Hours",min:"0.0",max:"24",step:"0.1",value:t.Hours,onChange:n})),r.a.createElement(x.a.Group,{as:j.a},r.a.createElement(x.a.Control,{as:"select",value:t.ActivityId,name:"ActivityId",onChange:n},r.a.createElement("option",{key:-1,value:""},"--- Select Activity ---"),s)))),r.a.createElement(N.a,{size:"sm",variant:"danger",className:"float-right",onClick:a},r.a.createElement("i",{className:"fas fa-trash"})))};var X=function(e){var t=e.now,a=e.dateItem,s=e.userTimeEntries,l=e.userTemplates,i=e.saveTimeEntries,c=Object(n.useState)([]),m=o()(c,2),u=m[0],d=m[1];Object(n.useEffect)((function(){s.length>0?d([{Id:E()().unix(),IssueId:0,ActivityId:-1,Hours:1,Comments:"Comments"}]):d(l)}),[s]);var h=!1,f=r.a.createElement(r.a.Fragment,null),p=r.a.createElement(r.a.Fragment,null),v=s.map((function(e){return r.a.createElement(W.a,{key:e.id},"Issue: ",e.issue.id," | Hours: ",e.hours," | ",e.activity.name," | ",e.comments," ")}));t.isAfter(a)&&(f=u.map((function(e,t){return r.a.createElement(Q,{key:t,entry:e,handleChange:function(e){return function(e,t){var a=t<0?[{}]:Array.from(u),n=e.target.name,r=a[t<0?0:t];if("IssueId"===n)try{var s=parseInt(e.target.value);r=Object.assign(r,B()({},n,s))}catch(e){console.warn("Only numbers allowed")}else if("ActivityId"===n)try{var l=parseInt(e.target.value);r=Object.assign(r,B()({},n,l))}catch(e){console.warn("Only numbers allowed")}else if("Hours"===n)try{var i=parseFloat(e.target.value);r=Object.assign(r,B()({},n,i))}catch(e){console.warn("Only numbers allowed")}else r=Object.assign(r,B()({},n,e.target.value));a[t]=r,d(a)}(e,t)},removeTask:function(){return function(e){var t=Array.from(u);t.length>1&&(t.splice(e,1),d(t))}(t)}})})),h=!0),h&&(p=r.a.createElement(j.a,null,r.a.createElement(V.a,{vertical:!0},r.a.createElement(N.a,{variant:"secondary",onClick:function(e){var t={Id:E()().unix(),IssueId:0,ActivityId:-1,Hours:1,Comments:"Comments"},a=q()(u,t);d(a)}},"Add Task"),r.a.createElement(N.a,{variant:"success",onClick:function(){i(a.format("YYYY-MM-DD"),u)}},"Save"))));var g=6===a.day()||0===a.day()?"danger":"primary";return r.a.createElement(W.a,{variant:g},r.a.createElement("h6",null,a.format("dddd"),"Â ",r.a.createElement("small",null,a.format("YYYY-MM-DD"))),r.a.createElement(y.a,null,r.a.createElement(j.a,{xs:10},r.a.createElement(G.a,null,v),r.a.createElement(G.a,null,f)),p))};var Z=function(){var e=Object(n.useState)([]),t=o()(e,2),a=t[0],s=t[1],l=Object(n.useState)({show:!1}),i=o()(l,2),c=i[0],m=i[1],u=E()(),h=u.year(),f=u.month(),p=u.date(),g=p>=16?E()().year(h).month(f).date(16).format("YYYY-MM-DD"):E()().year(h).month(f).date(1).format("YYYY-MM-DD"),b=p>=16?E()().year(h).month(f).date(1).add(1,"months").subtract(1,"days").format("YYYY-MM-DD"):E()().year(h).month(f).date(15).format("YYYY-MM-DD"),k=Y.getDateArray(g,b),I=Y.getUserTemplates();function A(e,t){O.a.post("api/redmine/timeentries?userApiKey=".concat(Y.getApiKey(),"&spentOn=").concat(e),t).then((function(e){var t=a.concat(e.data);s(t)}),(function(e){m({error:e.response.data,show:!0})}))}Object(n.useEffect)((function(){var e=Y.getUserInfo();O.a.get("api/redmine/timeentries?userApiKey=".concat(Y.getApiKey(),"&userId=").concat(e.id,"&from=").concat(g,"&to=").concat(b)).then((function(e){return s(e.data)}))}),[]);var C=k.map((function(e,t){var n=d()(a,{spent_on:e.format("YYYY-MM-DD")});return r.a.createElement(X,{key:t,now:u,dateItem:e,userTimeEntries:n,userTemplates:I,saveTimeEntries:A})})),D=r.a.createElement(r.a.Fragment,null);return c.show&&(D=r.a.createElement(F.a,{variant:"danger",onClose:function(){return m({show:!1})},dismissible:!0},r.a.createElement(F.a.Heading,null,"Oh snap! You got an error!"),r.a.createElement("p",null,JSON.stringify(c.error,null,2)))),r.a.createElement(v.a,null,r.a.createElement("h1",{className:"page-header"},r.a.createElement("i",{className:"far fa-calendar-alt"})," Simple Capture"),D,r.a.createElement(y.a,null,r.a.createElement(j.a,null,r.a.createElement(G.a,null,C))))},$=a(244),ee=a(240),te=a.n(ee),ae=a(241),ne=a.n(ae),re=a(57),se=a.n(re),le=a(242),ie=a.n(le),ce=a(75),me=a.n(ce),oe=a(243),ue=a.n(oe);var de=function(e){var t=e.timeEntryActivities.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}));return r.a.createElement(x.a.Control,{as:"select",defaultValue:e.selectedActivity,name:e.name,onChange:e.onChange},r.a.createElement("option",{key:-1,value:""},"--- Select Activity ---"),t)};function he(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var fe=function(e){ue()(n,e);var t,a=(t=n,function(){var e,a=me()(t);if(he()){var n=me()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return ie()(this,e)});function n(e){var t;return te()(this,n),(t=a.call(this,e)).state={Id:-1,IssueId:0,Comments:"",ActivityId:-1,Hours:0},t.handleChange=t.handleChange.bind(se()(t)),t.handleSubmit=t.handleSubmit.bind(se()(t)),t}return ne()(n,[{key:"handleChange",value:function(e){var t=e.target.name;"IssueId"===t||"ActivityId"===t?this.setState(B()({},t,parseInt(e.target.value))):"Hours"===t?this.setState(B()({},t,parseFloat(e.target.value))):this.setState(B()({},t,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.addTemplate({Id:E()().unix(),IssueId:this.state.IssueId,Comments:this.state.Comments,ActivityId:this.state.ActivityId,Hours:this.state.Hours})}},{key:"render",value:function(){return r.a.createElement(x.a,{onSubmit:this.handleSubmit},r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Label,null,"Issue"),r.a.createElement(x.a.Control,{type:"text",name:"IssueId",onChange:this.handleChange}),r.a.createElement(x.a.Label,null,"Comments"),r.a.createElement(x.a.Control,{type:"text",name:"Comments",onChange:this.handleChange}),r.a.createElement(x.a.Label,null,"Activity"),r.a.createElement(de,{name:"ActivityId",timeEntryActivities:Y.getTimeEntryActivities(),onChange:this.handleChange}),r.a.createElement(x.a.Label,null,"Hours"),r.a.createElement(x.a.Control,{type:"number",name:"Hours",min:"0",max:"8",step:"0.1",onChange:this.handleChange}),r.a.createElement(N.a,{type:"submit",variant:"success"},"Save")))}}]),n}(r.a.Component);var pe=function(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("MiniRedmineTemplates")||"[]")),t=o()(e,2),a=t[0],s=t[1],l=a.map((function(e,t){return r.a.createElement(W.a,{key:e.Id},e.IssueId," | ",Y.getTimeEntryActivityById(e.ActivityId).name," |",e.Comments," | ",e.Hours," | ",r.a.createElement(N.a,{type:"button",variant:"danger",onClick:function(){return function(e){var t=Array.from(a);t.splice(e,1),s(t),localStorage.setItem("MiniRedmineTemplates",JSON.stringify(t))}(t)}},r.a.createElement("i",{className:"fas fa-trash"})))})),i=f()(a,(function(e){return new Number(e.Hours)})).toString(),c=i>0?r.a.createElement("h3",null,"Total Hours ",r.a.createElement($.a,{variant:"primary"},i)):r.a.createElement(r.a.Fragment,null);return r.a.createElement(v.a,null,r.a.createElement("h2",{className:"mb-3"},"Templates"),r.a.createElement(y.a,null,r.a.createElement(j.a,null,r.a.createElement(fe,{addTemplate:function(e){var t=q()(a,e);s(t),localStorage.setItem("MiniRedmineTemplates",JSON.stringify(t))}})),r.a.createElement(j.a,null,c,r.a.createElement(G.a,null,l))))},Ee=function(){return r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/Login"},r.a.createElement(_,null)),r.a.createElement(U,{exact:!0,path:"/"},r.a.createElement(C,null)),r.a.createElement(U,{path:"/SimpleCapture"},r.a.createElement(Z,null)),r.a.createElement(U,{path:"/Templates"},r.a.createElement(pe,null)),r.a.createElement(U,{path:"/PersonalReport"},r.a.createElement(b,null)))},je=a(29),ve=a(35);var ye=function(){var e=Object(c.g)(),t=r.a.createElement(r.a.Fragment,null);if(Y.isAuthenticated){var a=Y.getUserInfo();t=r.a.createElement(ve.a.Text,null,"Hello ",a.firstName," ",a.lastName)}return r.a.createElement(ve.a,{bg:"primary",className:"mb-3"},r.a.createElement(ve.a.Brand,{onClick:function(){return e.push("/")}},"MiniRedmine 2"),r.a.createElement(ve.a.Toggle,{"aria-controls":"main-navbar-nav"}),r.a.createElement(ve.a.Collapse,{id:"main-navbar-nav"},r.a.createElement(je.a,{className:"mr-auto"},r.a.createElement(je.a.Link,{onClick:function(){return e.push("/SimpleCapture")}},"Simple Capture")),r.a.createElement(je.a,{className:"mr-auto"},r.a.createElement(je.a.Link,{onClick:function(){return e.push("/Templates")}},"Templates")),r.a.createElement(je.a,{className:"mr-auto"},r.a.createElement(je.a.Link,{onClick:function(){return e.push("/PersonalReport")}},"Personal Report"))),t)},ge=function(){return r.a.createElement(i.a,null,r.a.createElement(ye,null),r.a.createElement(Ee,null))};l.a.render(r.a.createElement(ge,null),document.getElementById("miniredmine2"))}},[[375,1,2]]]);
//# sourceMappingURL=main.389b099bb352437dd22c.js.map