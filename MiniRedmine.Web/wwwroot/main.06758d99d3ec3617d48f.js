(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{355:function(e,t,a){var n={"./af":102,"./af.js":102,"./ar":103,"./ar-dz":104,"./ar-dz.js":104,"./ar-kw":105,"./ar-kw.js":105,"./ar-ly":106,"./ar-ly.js":106,"./ar-ma":107,"./ar-ma.js":107,"./ar-sa":108,"./ar-sa.js":108,"./ar-tn":109,"./ar-tn.js":109,"./ar.js":103,"./az":110,"./az.js":110,"./be":111,"./be.js":111,"./bg":112,"./bg.js":112,"./bm":113,"./bm.js":113,"./bn":114,"./bn.js":114,"./bo":115,"./bo.js":115,"./br":116,"./br.js":116,"./bs":117,"./bs.js":117,"./ca":118,"./ca.js":118,"./cs":119,"./cs.js":119,"./cv":120,"./cv.js":120,"./cy":121,"./cy.js":121,"./da":122,"./da.js":122,"./de":123,"./de-at":124,"./de-at.js":124,"./de-ch":125,"./de-ch.js":125,"./de.js":123,"./dv":126,"./dv.js":126,"./el":127,"./el.js":127,"./en-SG":128,"./en-SG.js":128,"./en-au":129,"./en-au.js":129,"./en-ca":130,"./en-ca.js":130,"./en-gb":131,"./en-gb.js":131,"./en-ie":132,"./en-ie.js":132,"./en-il":133,"./en-il.js":133,"./en-nz":134,"./en-nz.js":134,"./eo":135,"./eo.js":135,"./es":136,"./es-do":137,"./es-do.js":137,"./es-us":138,"./es-us.js":138,"./es.js":136,"./et":139,"./et.js":139,"./eu":140,"./eu.js":140,"./fa":141,"./fa.js":141,"./fi":142,"./fi.js":142,"./fo":143,"./fo.js":143,"./fr":144,"./fr-ca":145,"./fr-ca.js":145,"./fr-ch":146,"./fr-ch.js":146,"./fr.js":144,"./fy":147,"./fy.js":147,"./ga":148,"./ga.js":148,"./gd":149,"./gd.js":149,"./gl":150,"./gl.js":150,"./gom-latn":151,"./gom-latn.js":151,"./gu":152,"./gu.js":152,"./he":153,"./he.js":153,"./hi":154,"./hi.js":154,"./hr":155,"./hr.js":155,"./hu":156,"./hu.js":156,"./hy-am":157,"./hy-am.js":157,"./id":158,"./id.js":158,"./is":159,"./is.js":159,"./it":160,"./it-ch":161,"./it-ch.js":161,"./it.js":160,"./ja":162,"./ja.js":162,"./jv":163,"./jv.js":163,"./ka":164,"./ka.js":164,"./kk":165,"./kk.js":165,"./km":166,"./km.js":166,"./kn":167,"./kn.js":167,"./ko":168,"./ko.js":168,"./ku":169,"./ku.js":169,"./ky":170,"./ky.js":170,"./lb":171,"./lb.js":171,"./lo":172,"./lo.js":172,"./lt":173,"./lt.js":173,"./lv":174,"./lv.js":174,"./me":175,"./me.js":175,"./mi":176,"./mi.js":176,"./mk":177,"./mk.js":177,"./ml":178,"./ml.js":178,"./mn":179,"./mn.js":179,"./mr":180,"./mr.js":180,"./ms":181,"./ms-my":182,"./ms-my.js":182,"./ms.js":181,"./mt":183,"./mt.js":183,"./my":184,"./my.js":184,"./nb":185,"./nb.js":185,"./ne":186,"./ne.js":186,"./nl":187,"./nl-be":188,"./nl-be.js":188,"./nl.js":187,"./nn":189,"./nn.js":189,"./pa-in":190,"./pa-in.js":190,"./pl":191,"./pl.js":191,"./pt":192,"./pt-br":193,"./pt-br.js":193,"./pt.js":192,"./ro":194,"./ro.js":194,"./ru":195,"./ru.js":195,"./sd":196,"./sd.js":196,"./se":197,"./se.js":197,"./si":198,"./si.js":198,"./sk":199,"./sk.js":199,"./sl":200,"./sl.js":200,"./sq":201,"./sq.js":201,"./sr":202,"./sr-cyrl":203,"./sr-cyrl.js":203,"./sr.js":202,"./ss":204,"./ss.js":204,"./sv":205,"./sv.js":205,"./sw":206,"./sw.js":206,"./ta":207,"./ta.js":207,"./te":208,"./te.js":208,"./tet":209,"./tet.js":209,"./tg":210,"./tg.js":210,"./th":211,"./th.js":211,"./tl-ph":212,"./tl-ph.js":212,"./tlh":213,"./tlh.js":213,"./tr":214,"./tr.js":214,"./tzl":215,"./tzl.js":215,"./tzm":216,"./tzm-latn":217,"./tzm-latn.js":217,"./tzm.js":216,"./ug-cn":218,"./ug-cn.js":218,"./uk":219,"./uk.js":219,"./ur":220,"./ur.js":220,"./uz":221,"./uz-latn":222,"./uz-latn.js":222,"./uz.js":221,"./vi":223,"./vi.js":223,"./x-pseudo":224,"./x-pseudo.js":224,"./yo":225,"./yo.js":225,"./zh-cn":226,"./zh-cn.js":226,"./zh-hk":227,"./zh-hk.js":227,"./zh-tw":228,"./zh-tw.js":228};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=355},362:function(e,t,a){},375:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(51),l=a.n(s),i=a(32),c=a(27),m=a(14),o=a.n(m),u=a(26),d=a.n(u),h=a(52),f=a.n(h),p=a(39),E=a.n(p),j=a(1),y=a.n(j),v=a(7),g=a(22),b=a(23),I=a(232),k=a(230),A=a.n(k),Y={isAuthenticated:!1,_userInfo:{},_timeEntryActivities:[],_dateArray:[],signIn:function(e,t,a){this._userInfo=t,this._timeEntryActivities=a,localStorage.setItem("RedmineApiToken",e),this.isAuthenticated=!0},signout:function(){this.isAuthenticated=!1,this._userInfo={},this._timeEntryActivities=[]},getApiKey:function(){return localStorage.getItem("RedmineApiToken")||""},getUserInfo:function(){return this.isAuthenticated?this._userInfo:{}},getTimeEntryActivities:function(){return this.isAuthenticated?this._timeEntryActivities:[]},getTimeEntryActivityById:function(e){var t=new Number(e);return this.isAuthenticated?A()(this._timeEntryActivities,{id:t}):{name:""}},getUserTemplates:function(){return JSON.parse(localStorage.getItem("MiniRedmineTemplates")||"[]")},getDateArray:function(e,t){if(this._dateArray.length&&this._dateArray[0].format("YYYY-MM-DD")===e)return this._dateArray;this._dateArray=[];var a=y()(e,"YYYY-MM-DD"),n=y()(t,"YYYY-MM-DD");do{this._dateArray.push(a.clone()),a.add(1,"days")}while(!1===a.isAfter(n));return this._dateArray}},C=(a(362),function(e){var t=new y.a,a=t.month(),s=Y.getUserInfo(),l=Object(n.useState)([]),i=o()(l,2),c=i[0],m=i[1];Object(n.useEffect)((function(){var e=y()(),t=e.year(),a=e.month(),n="",r="";e.date()>=16?(n=y()().year(t).month(a).date(16).format("YYYY-MM-DD"),r=y()().year(t).month(a).date(1).add(1,"months").subtract(1,"days").format("YYYY-MM-DD")):(n=y()().year(t).month(a).date(1).format("YYYY-MM-DD"),r=y()().year(t).month(a).date(15).format("YYYY-MM-DD")),d.a.get("api/redmine/timeentries?userApiKey=".concat(Y.getApiKey(),"&userId=").concat(s.id,"&from=").concat(n,"&to=").concat(r)).then((function(e){return m(e.data)}))}),[]),t.startOf("month").startOf("week");for(var u,h=0,p=[];h<6;){var j=[];for(u=0;u<7;u++){var k=t.format("YYYY-MM-DD"),A=r.a.createElement("td",{key:u,className:a!==t.month()?"calendar-prior-months-date":""},t.format("D")),C=f()(c,{spent_on:k}),D=E()(C,"hours");C.length&&(A=r.a.createElement("td",{key:u,className:a!==t.month()?"calendar-prior-months-date":""},t.format("D"),r.a.createElement("p",null,"Tasks:",C.length," Hours:",D))),j.push(A),t.add(1,"day")}var S=r.a.createElement("tr",{key:h,className:"calendar-month-row"},j);h++,p.push(S)}return r.a.createElement(g.a,null,r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement("h5",null,"Total Hours: ",E()(c,"hours")),r.a.createElement(I.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",{className:"calendar-month-header-row"},r.a.createElement("th",null,"Domingo"),r.a.createElement("th",null,"Lunes"),r.a.createElement("th",null,"Martes"),r.a.createElement("th",null,"Miercoles"),r.a.createElement("th",null,"Jueves"),r.a.createElement("th",null,"Viernes"),r.a.createElement("th",null,"Sabado"))),r.a.createElement("tbody",null,p)))))}),D=a(233);var S=function(){var e=Y.getUserInfo();return r.a.createElement(D.a,null,r.a.createElement("h1",null,"Welcome!"),r.a.createElement("p",null,e.firstName,"Â ",e.lastName))},w=a(71),M=a.n(w),T=a(234),O=a.n(T),N=a(15),z=a(6),x=a(74);var _=function(){var e=Object(n.useState)(Y.getApiKey()),t=o()(e,2),a=t[0],s=t[1],l=Object(c.g)(),i=(Object(c.h)().state||{from:{pathname:"/"}}).from,m=function(){return l.replace(i)};function u(){return(u=O()(M.a.mark((function e(t){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===a){e.next=10;break}return e.next=4,d.a.get("api/redmine/userinfo?userApiKey=".concat(a));case 4:return n=e.sent,e.next=7,d.a.get("api/redmine/timeentryactivities?userApiKey=".concat(a));case 7:r=e.sent,Y.signIn(a,n.data,r.data),m();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(g.a,{fluid:"true"},r.a.createElement(z.a,{onSubmit:function(e){return u.apply(this,arguments)}},r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Group,{as:v.a},r.a.createElement(x.a,null,r.a.createElement(z.a.Control,{type:"text",placeholder:"Redmine Api Token",value:a,onChange:function(e){return s(e.target.value)}}),r.a.createElement(x.a.Append,null,r.a.createElement(N.a,{variant:"primary",type:"submit"},"Login")))))))},H=a(237),R=a.n(H),L=a(238),K=a.n(L);var U=function(e){var t=e.children,a=K()(e,["children"]);return r.a.createElement(c.b,R()({},a,{render:function(e){var a=e.location;return Y.isAuthenticated?t:r.a.createElement(c.a,{to:{pathname:"/login",state:{from:a}}})}}))},F=a(76),G=a(29),J=a(18),B=a.n(J),P=a(53),q=a.n(P),V=a(239),W=a(21);var Q=function(e){var t=e.entry,a=e.removeTask,n=e.handleChange,s=Y.getTimeEntryActivities().map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}));return r.a.createElement(W.a,null,r.a.createElement(z.a,null,r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Group,{as:v.a},r.a.createElement(z.a.Control,{type:"text",name:"IssueId",value:t.IssueId,onChange:n})),r.a.createElement(z.a.Group,{as:v.a},r.a.createElement(z.a.Control,{type:"text",name:"Comments",maxLength:"254",value:t.Comments,onChange:n}))),r.a.createElement(z.a.Row,null,r.a.createElement(z.a.Group,{as:v.a},r.a.createElement(z.a.Control,{type:"number",name:"Hours",min:"0.0",max:"24",step:"0.1",value:t.Hours,onChange:n})),r.a.createElement(z.a.Group,{as:v.a},r.a.createElement(z.a.Control,{as:"select",value:t.ActivityId,name:"ActivityId",onChange:n},r.a.createElement("option",{key:-1,value:""},"--- Select Activity ---"),s)))),r.a.createElement(N.a,{size:"sm",variant:"danger",className:"float-right",onClick:a},r.a.createElement("i",{className:"fas fa-trash"})))};var X=function(e){var t=e.now,a=e.dateItem,s=e.userTimeEntries,l=e.userTemplates,i=e.saveTimeEntries,c=Object(n.useState)([]),m=o()(c,2),u=m[0],d=m[1];Object(n.useEffect)((function(){s.length>0?d([{Id:y()().unix(),IssueId:0,ActivityId:-1,Hours:1,Comments:"Comments"}]):d(l)}),[s]);var h=!1,f=r.a.createElement(r.a.Fragment,null),p=r.a.createElement(r.a.Fragment,null),E=s.map((function(e){return r.a.createElement(W.a,{key:e.id},"Issue: ",e.issue.id," | Hours: ",e.hours," | ",e.activity.name," | ",e.comments," ")}));t.isAfter(a)&&(f=u.map((function(e,t){return r.a.createElement(Q,{key:t,entry:e,handleChange:function(e){return function(e,t){var a=t<0?[{}]:Array.from(u),n=e.target.name,r=a[t<0?0:t];if("IssueId"===n)try{var s=parseInt(e.target.value);r=Object.assign(r,B()({},n,s))}catch(e){console.warn("Only numbers allowed")}else if("ActivityId"===n)try{var l=parseInt(e.target.value);r=Object.assign(r,B()({},n,l))}catch(e){console.warn("Only numbers allowed")}else if("Hours"===n)try{var i=parseFloat(e.target.value);r=Object.assign(r,B()({},n,i))}catch(e){console.warn("Only numbers allowed")}else r=Object.assign(r,B()({},n,e.target.value));a[t]=r,d(a)}(e,t)},removeTask:function(){return function(e){var t=Array.from(u);t.length>1&&(t.splice(e,1),d(t))}(t)}})})),h=!0),h&&(p=r.a.createElement(v.a,null,r.a.createElement(V.a,{vertical:!0},r.a.createElement(N.a,{variant:"secondary",onClick:function(e){var t={Id:y()().unix(),IssueId:0,ActivityId:-1,Hours:1,Comments:"Comments"},a=q()(u,t);d(a)}},"Add Task"),r.a.createElement(N.a,{variant:"success",onClick:function(){i(a.format("YYYY-MM-DD"),u)}},"Save"))));var j=6===a.day()||0===a.day()?"danger":"primary";return r.a.createElement(W.a,{variant:j},r.a.createElement("h6",null,a.format("dddd"),"Â ",r.a.createElement("small",null,a.format("YYYY-MM-DD"))),r.a.createElement(b.a,null,r.a.createElement(v.a,{xs:10},r.a.createElement(G.a,null,E),r.a.createElement(G.a,null,f)),p))};var Z=function(){var e=Object(n.useState)([]),t=o()(e,2),a=t[0],s=t[1],l=Object(n.useState)({show:!1}),i=o()(l,2),c=i[0],m=i[1],u=y()(),h=u.year(),p=u.month(),E=u.date(),j=E>=16?y()().year(h).month(p).date(16).format("YYYY-MM-DD"):y()().year(h).month(p).date(1).format("YYYY-MM-DD"),I=E>=16?y()().year(h).month(p).date(1).add(1,"months").subtract(1,"days").format("YYYY-MM-DD"):y()().year(h).month(p).date(15).format("YYYY-MM-DD"),k=Y.getDateArray(j,I),A=Y.getUserTemplates();function C(e,t){d.a.post("api/redmine/timeentries?userApiKey=".concat(Y.getApiKey(),"&spentOn=").concat(e),t).then((function(e){var t=a.concat(e.data);s(t)}),(function(e){m({error:e.response.data,show:!0})}))}Object(n.useEffect)((function(){var e=Y.getUserInfo();d.a.get("api/redmine/timeentries?userApiKey=".concat(Y.getApiKey(),"&userId=").concat(e.id,"&from=").concat(j,"&to=").concat(I)).then((function(e){return s(e.data)}))}),[]);var D=k.map((function(e,t){var n=f()(a,{spent_on:e.format("YYYY-MM-DD")});return r.a.createElement(X,{key:t,now:u,dateItem:e,userTimeEntries:n,userTemplates:A,saveTimeEntries:C})})),S=r.a.createElement(r.a.Fragment,null);return c.show&&(S=r.a.createElement(F.a,{variant:"danger",onClose:function(){return m({show:!1})},dismissible:!0},r.a.createElement(F.a.Heading,null,"Oh snap! You got an error!"),r.a.createElement("p",null,JSON.stringify(c.error,null,2)))),r.a.createElement(g.a,null,r.a.createElement("h1",{className:"page-header"},r.a.createElement("i",{className:"far fa-calendar-alt"})," Simple Capture"),S,r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement(G.a,null,D))))},$=a(244),ee=a(240),te=a.n(ee),ae=a(241),ne=a.n(ae),re=a(57),se=a.n(re),le=a(242),ie=a.n(le),ce=a(75),me=a.n(ce),oe=a(243),ue=a.n(oe);var de=function(e){var t=e.timeEntryActivities.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.name)}));return r.a.createElement(z.a.Control,{as:"select",defaultValue:e.selectedActivity,name:e.name,onChange:e.onChange},r.a.createElement("option",{key:-1,value:""},"--- Select Activity ---"),t)};function he(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var fe=function(e){ue()(n,e);var t,a=(t=n,function(){var e,a=me()(t);if(he()){var n=me()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return ie()(this,e)});function n(e){var t;return te()(this,n),(t=a.call(this,e)).state={Id:-1,IssueId:0,Comments:"",ActivityId:-1,Hours:0},t.handleChange=t.handleChange.bind(se()(t)),t.handleSubmit=t.handleSubmit.bind(se()(t)),t}return ne()(n,[{key:"handleChange",value:function(e){var t=e.target.name;"IssueId"===t||"ActivityId"===t?this.setState(B()({},t,parseInt(e.target.value))):"Hours"===t?this.setState(B()({},t,parseFloat(e.target.value))):this.setState(B()({},t,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.addTemplate({Id:y()().unix(),IssueId:this.state.IssueId,Comments:this.state.Comments,ActivityId:this.state.ActivityId,Hours:this.state.Hours})}},{key:"render",value:function(){return r.a.createElement(z.a,{onSubmit:this.handleSubmit},r.a.createElement(z.a.Group,null,r.a.createElement(z.a.Label,null,"Issue"),r.a.createElement(z.a.Control,{type:"text",name:"IssueId",onChange:this.handleChange}),r.a.createElement(z.a.Label,null,"Comments"),r.a.createElement(z.a.Control,{type:"text",name:"Comments",onChange:this.handleChange}),r.a.createElement(z.a.Label,null,"Activity"),r.a.createElement(de,{name:"ActivityId",timeEntryActivities:Y.getTimeEntryActivities(),onChange:this.handleChange}),r.a.createElement(z.a.Label,null,"Hours"),r.a.createElement(z.a.Control,{type:"number",name:"Hours",min:"0",max:"8",step:"0.1",onChange:this.handleChange}),r.a.createElement(N.a,{type:"submit",variant:"success"},"Save")))}}]),n}(r.a.Component);var pe=function(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("MiniRedmineTemplates")||"[]")),t=o()(e,2),a=t[0],s=t[1],l=a.map((function(e,t){return r.a.createElement(W.a,{key:e.Id},e.IssueId," | ",Y.getTimeEntryActivityById(e.ActivityId).name," |",e.Comments," | ",e.Hours," | ",r.a.createElement(N.a,{type:"button",variant:"danger",onClick:function(){return function(e){var t=Array.from(a);t.splice(e,1),s(t),localStorage.setItem("MiniRedmineTemplates",JSON.stringify(t))}(t)}},r.a.createElement("i",{className:"fas fa-trash"})))})),i=E()(a,(function(e){return new Number(e.Hours)})).toString(),c=i>0?r.a.createElement("h3",null,"Total Hours ",r.a.createElement($.a,{variant:"primary"},i)):r.a.createElement(r.a.Fragment,null);return r.a.createElement(g.a,null,r.a.createElement("h2",{className:"mb-3"},"Templates"),r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement(fe,{addTemplate:function(e){var t=q()(a,e);s(t),localStorage.setItem("MiniRedmineTemplates",JSON.stringify(t))}})),r.a.createElement(v.a,null,c,r.a.createElement(G.a,null,l))))},Ee=function(){return r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/Login"},r.a.createElement(_,null)),r.a.createElement(U,{exact:!0,path:"/"},r.a.createElement(S,null)),r.a.createElement(U,{path:"/SimpleCapture"},r.a.createElement(Z,null)),r.a.createElement(U,{path:"/Templates"},r.a.createElement(pe,null)),r.a.createElement(U,{path:"/PersonalReport"},r.a.createElement(C,null)))},je=a(30),ye=a(35);var ve=function(){var e=Object(c.g)(),t=r.a.createElement(r.a.Fragment,null);if(Y.isAuthenticated){var a=Y.getUserInfo();t=r.a.createElement(ye.a.Text,null,"Hello ",a.firstName," ",a.lastName)}return r.a.createElement(ye.a,{bg:"primary",className:"mb-3"},r.a.createElement(ye.a.Brand,{onClick:function(){return e.push("/")}},"MiniRedmine 2"),r.a.createElement(ye.a.Toggle,{"aria-controls":"main-navbar-nav"}),r.a.createElement(ye.a.Collapse,{id:"main-navbar-nav"},r.a.createElement(je.a,{className:"mr-auto"},r.a.createElement(je.a.Link,{onClick:function(){return e.push("/SimpleCapture")}},"Simple Capture")),r.a.createElement(je.a,{className:"mr-auto"},r.a.createElement(je.a.Link,{onClick:function(){return e.push("/Templates")}},"Templates")),r.a.createElement(je.a,{className:"mr-auto"},r.a.createElement(je.a.Link,{onClick:function(){return e.push("/PersonalReport")}},"Personal Report"))),t)},ge=function(){return r.a.createElement(i.a,null,r.a.createElement(ve,null),r.a.createElement(Ee,null))};l.a.render(r.a.createElement(ge,null),document.getElementById("miniredmine2"))}},[[375,1,2]]]);
//# sourceMappingURL=main.06758d99d3ec3617d48f.js.map